---
phase: 03-search-ux
plan: 01
type: execute
wave: 1
depends_on: ["02-02"]
files_modified:
  - package.json
  - docusaurus.config.ts
autonomous: true
requirements: [UX-01]

must_haves:
  truths:
    - "Docusaurus local search plugin is installed and configured"
    - "Search bar is visible in the navbar"
    - "Search results are contextual to the selected version"
  artifacts:
    - path: "package.json"
      provides: "Offline search plugin for Docusaurus"
      contains: "@easyops-cn/docusaurus-search-local"
---

<objective>
Implement a robust local search solution that supports versioned documentation and provides an integrated search UI.

Purpose: Enhances discoverability of normative artifacts across different versions without external dependencies (like Algolia).
Output: A functional, contextual search bar in the site header.
</objective>

<execution_context>
@C:/Users/jcols/.gemini/get-shit-done/workflows/execute-plan.md
@C:/Users/jcols/.gemini/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/03-search-ux/03-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install Local Search Plugin</name>
  <files>package.json</files>
  <action>
    Install the `@easyops-cn/docusaurus-search-local` plugin as a dependency.
    Command: `npm install @easyops-cn/docusaurus-search-local`
  </action>
  <verify>`npm list @easyops-cn/docusaurus-search-local` shows the installed version.</verify>
  <done>Search plugin is added to the project dependencies.</done>
</task>

<task type="auto">
  <name>Task 2: Configure Search Plugin</name>
  <files>docusaurus.config.ts</files>
  <action>
    Add the plugin configuration to the `themes` array in `docusaurus.config.ts`.
    Config settings:
    - `hashed: true`
    - `language: ["en", "sv"]` (if Swedish content is present)
    - `indexDocs: true`
    - `indexBlog: true`
    - `indexPages: true`
    - `docsRouteBasePath: "/docs"`
    - `contextualSearch: true` (Critical for versioned docs)
  </action>
  <verify>Check `docusaurus.config.ts` for the search plugin configuration block.</verify>
  <done>Search plugin is integrated and configured for versioned search.</done>
</task>

<task type="auto">
  <name>Task 3: Verify Search in Production Build</name>
  <files>build/</files>
  <action>
    Since local search indices are built during the production build, run the build and serve locally to verify.
    Command: `npm run build && npm run serve` (or just `npm run build` and check for index files).
  </action>
  <verify>The `build/` directory contains search-related index files (e.g., `search-index.json` or similar).</verify>
  <done>Search functionality is verified in a production-like environment.</done>
</task>

</tasks>

<verification>
Ensure the search bar appears in the navbar after a successful build. Test searching for terms across both 'v1.0.0' and 'Next' versions to confirm contextual results.
</verification>

<success_criteria>
1. Local search plugin is installed and active.
2. Search bar is integrated into the site UI.
3. Search results respect the selected documentation version.
</success_criteria>

<output>
After completion, create `.planning/phases/03-search-ux/03-01-SUMMARY.md`
</output>
