---
phase: 05-final-refinements
plan: 01
type: execute
wave: 1
depends_on: ["04-03"]
files_modified:
  - docusaurus.config.ts
  - src/css/custom.css
  - package.json
autonomous: true
requirements: [UX-02, FEAT-01, DOC-01]

must_haves:
  truths:
    - "Mermaid theme is installed and enabled in docusaurus.config.ts"
    - "Mermaid diagrams render correctly in both light and dark modes"
    - "Dark mode text contrast meets WCAG AA standards"
    - "Primary color palette aligns with Digg.se brand"
  artifacts:
    - path: "package.json"
      provides: "Docusaurus Mermaid theme"
      contains: "@docusaurus/theme-mermaid"
---

<objective>
Enable visual Mermaid diagram rendering and refine the portal's colors and contrast for improved accessibility and brand alignment.

Purpose: Ensures technical documentation is visually clear and the interface is inclusive and professional in all themes.
Output: A version of the portal with live diagrams and a polished, accessible color palette.
</objective>

<execution_context>
@C:/Users/jcols/.gemini/get-shit-done/workflows/execute-plan.md
@C:/Users/jcols/.gemini/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/05-final-refinements/05-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install and Enable Mermaid</name>
  <files>package.json, docusaurus.config.ts</files>
  <action>
    1. Install `@docusaurus/theme-mermaid`.
    2. Update `docusaurus.config.ts` to enable Mermaid:
       - Add `'@docusaurus/theme-mermaid'` to the `themes` array.
       - Set `markdown.mermaid: true`.
       - Configure `themeConfig.mermaid` with `theme: { light: 'neutral', dark: 'dark' }`.
  </action>
  <verify>`npm list @docusaurus/theme-mermaid` shows the package installed and `docusaurus.config.ts` reflects the settings.</verify>
  <done>Visual diagrams are supported.</done>
</task>

<task type="auto">
  <name>Task 2: Refine Color Palette and Contrast</name>
  <files>src/css/custom.css</files>
  <action>
    - Audit and update `src/css/custom.css` with WCAG-compliant colors from research:
      - **Light Mode:** White BG (#FFFFFF), Science Blue Links (#005be2), Black Text (#000000).
      - **Dark Mode:** Dark Grey BG (#1B1B1D), Light Blue Links (#4FA3FF), Off-white Text (#F5F6F7).
    - Ensure all buttons and interactive elements maintain high contrast in both themes.
  </action>
  <verify>Visual check of the portal in both light and dark modes.</verify>
  <done>Accessibility and branding are harmonized.</done>
</task>

<task type="auto">
  <name>Task 3: Verify Build and Diagram Rendering</name>
  <files>build/</files>
  <action>
    - Run `npm run build` to ensure no regressions.
    - Create a temporary test file `docs/test-mermaid.md` with a simple diagram to verify rendering (remove before commit).
  </action>
  <verify>Diagrams render as SVGs in the browser.</verify>
  <done>Feature set is verified in production build.</done>
</task>

</tasks>

<verification>
Test the portal in both light and dark themes. Ensure Mermaid diagrams shift themes correctly. Verify that text is easily readable against all background variants.
</verification>

<success_criteria>
1. Mermaid diagrams are visual, not just code.
2. The color palette accurately reflects Digg.se.
3. Dark mode is fully accessible and high-contrast.
</success_criteria>

<output>
After completion, create `.planning/phases/05-final-refinements/05-01-SUMMARY.md`
</output>
