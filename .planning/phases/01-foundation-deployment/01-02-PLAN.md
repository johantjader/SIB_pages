---
phase: 01-foundation-deployment
plan: 02
type: execute
wave: 2
depends_on: ["01-01"]
files_modified:
  - .github/workflows/deploy.yml
autonomous: false
requirements: [SETUP-03]

must_haves:
  truths:
    - "GitHub Action triggered on push to main branch"
    - "Site is accessible at jcols.github.io/SIB_pages via HTTPS"
    - "Build and Deploy steps succeed in the Action history"
  artifacts:
    - path: ".github/workflows/deploy.yml"
      provides: "CI/CD pipeline using Actions-as-Source"
      contains: "actions/deploy-pages@v4"
  key_links:
    - from: ".github/workflows/deploy.yml"
      to: "GitHub Actions"
      via: "permissions: pages: write"
      pattern: "id-token: write"
---

<objective>
Establish the CI/CD pipeline and verify the live deployment to GitHub Pages.

Purpose: Automates the build and deployment process, ensuring the site is always up-to-date with the main branch.
Output: A live, auto-deploying documentation site.
</objective>

<execution_context>
@C:/Users/jcols/.gemini/get-shit-done/workflows/execute-plan.md
@C:/Users/jcols/.gemini/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation-deployment/01-RESEARCH.md
@.planning/phases/01-foundation-deployment/01-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create GitHub Actions Deployment Workflow</name>
  <files>.github/workflows/deploy.yml</files>
  <action>
    Create the `.github/workflows/deploy.yml` file using the "Actions-as-Source" pattern from the research.
    
    The workflow must:
    - Trigger on push to the `main` branch.
    - Have permissions for `contents: read`, `pages: write`, and `id-token: write`.
    - Build using Node 20.
    - Use `actions/upload-pages-artifact@v3` for the build output.
    - Use `actions/deploy-pages@v4` for deployment.
  </action>
  <verify>`cat .github/workflows/deploy.yml` confirms the correct configuration.</verify>
  <done>The deployment workflow file exists in the repository.</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Deployment workflow for GitHub Pages.</what-built>
  <how-to-verify>
    1. Ensure all changes from the previous plan (bootstrap and config) are committed and pushed to the `main` branch.
    2. Go to the GitHub repository settings -> **Pages**.
    3. Under **Build and deployment** -> **Source**, select **GitHub Actions**.
    4. Go to the **Actions** tab and verify the "Deploy to GitHub Pages" workflow is running or has completed successfully.
    5. Visit `https://jcols.github.io/SIB_pages/` to confirm the site is live.
  </how-to-verify>
  <resume-signal>Type "approved" or describe issues.</resume-signal>
</task>

</tasks>

<verification>
Check the GitHub Actions tab for a successful build and deploy run. Verify the site content at the live URL.
</verification>

<success_criteria>
1. GitHub Actions workflow is correctly configured and pushed.
2. The site is live at the configured URL.
3. Automated redeploy occurs on next push.
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation-deployment/01-02-SUMMARY.md`
</output>
